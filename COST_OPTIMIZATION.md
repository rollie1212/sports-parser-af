# üí∞ Cost Optimization Guide for Railway

## üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤

### 1. **–£–º–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
- **–ë—ã–ª–æ**: 1 –º–∏–Ω—É—Ç–∞
- **–°—Ç–∞–ª–æ**: 5 –º–∏–Ω—É—Ç (production), 2 –º–∏–Ω—É—Ç—ã (development)
- **–≠–∫–æ–Ω–æ–º–∏—è**: 80% API –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤**
- –ö—ç—à –Ω–∞ 10 –º–∏–Ω—É—Ç (production), 5 –º–∏–Ω—É—Ç (development)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π
- **–≠–∫–æ–Ω–æ–º–∏—è**: 50-70% API –∑–∞–ø—Ä–æ—Å–æ–≤

### 3. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞–º–∏ –ø–æ 50 –∑–∞–ø–∏—Å–µ–π
- Bulk –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ MongoDB
- **–≠–∫–æ–Ω–æ–º–∏—è**: 60% –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 4. **–£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
- –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è + –∑–∞–≤—Ç—Ä–∞
- **–≠–∫–æ–Ω–æ–º–∏—è**: 70% CPU –≤—Ä–µ–º–µ–Ω–∏

### 5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ MongoDB –∏–Ω–¥–µ–∫—Å—ã**
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π pool size (5 –≤–º–µ—Å—Ç–æ 10)
- **–≠–∫–æ–Ω–æ–º–∏—è**: 40% –ø–∞–º—è—Ç–∏

### 6. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**
- `NODE_OPTIONS=--max-old-space-size=256` (256MB –ª–∏–º–∏—Ç)
- –¢–∞–π–º–∞—É—Ç—ã: 10 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 15
- **–≠–∫–æ–Ω–æ–º–∏—è**: 50% –ø–∞–º—è—Ç–∏

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û—Ä–∏–≥–∏–Ω–∞–ª | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π | –≠–∫–æ–Ω–æ–º–∏—è |
|---------|----------|------------------|----------|
| API –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å | 60 | 12-18 | 70-80% |
| CPU –≤—Ä–µ–º—è | 100% | 30% | 70% |
| –ü–∞–º—è—Ç—å | 512MB | 256MB | 50% |
| MongoDB –∑–∞–ø—Ä–æ—Å–æ–≤ | 100% | 40% | 60% |
| –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ | 2-5s | 0.5-1s | 75% |

## üöÄ Railway Configuration

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
```json
{
  "deploy": {
    "startCommand": "node server-optimized.js",
    "healthcheckPath": "/health",
    "restartPolicyType": "ON_FAILURE"
  }
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
FETCH_INTERVAL_MINUTES=5
DAYS_AHEAD=3
BATCH_SIZE=50
CACHE_TTL_MINUTES=10
NODE_OPTIONS=--max-old-space-size=256
```

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. **–£—Å–ª–æ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**
- –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º

### 2. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**
- –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ
- –ö—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—á–∏—â–∞–µ–º –∫—ç—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤**
- Health check endpoint
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîß –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check
```bash
curl https://your-app.railway.app/health
```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
curl -X POST https://your-app.railway.app/update/force
```

### –õ–æ–≥–∏
- Railway Dashboard ‚Üí View Logs
- –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞

## üìà –û–∂–∏–¥–∞–µ–º–∞—è —ç–∫–æ–Ω–æ–º–∏—è

### Railway Costs
- **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω**: –î–æ 500 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü
- **–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π**: ~150-200 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü
- **–≠–∫–æ–Ω–æ–º–∏—è**: 60-70% –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã

### API Costs
- **API-Football**: –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ = –º–µ–Ω—å—à–µ –∑–∞—Ç—Ä–∞—Ç
- **MongoDB Atlas**: –ú–µ–Ω—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–π = –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏

### Performance
- –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–ø—É—Å–∫
- –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫
- –°—Ç–∞–±–∏–ª—å–Ω–µ–µ —Ä–∞–±–æ—Ç–∞

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏**
2. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–µ—Ä–≤—ã–µ –¥–Ω–∏**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏**
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ health check**
5. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ –∫—ç—à –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏**

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á—å—Ç–µ `BATCH_SIZE` –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ `CACHE_TTL_MINUTES`

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ API
**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á—å—Ç–µ `FETCH_INTERVAL_MINUTES` –∏–ª–∏ `CACHE_TTL_MINUTES`

### –ü—Ä–æ–±–ª–µ–º–∞: –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
**–†–µ—à–µ–Ω–∏–µ**: –£–º–µ–Ω—å—à–∏—Ç–µ `BATCH_SIZE` –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ `NODE_OPTIONS`

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
**–†–µ—à–µ–Ω–∏–µ**: –£–º–µ–Ω—å—à–∏—Ç–µ `FETCH_INTERVAL_MINUTES` –∏–ª–∏ `CACHE_TTL_MINUTES`
